groups:
- name: hosts
  rules:
######### ICMP ##########
  - alert: host_is_not_available_via_icmp
    expr: probe_success{job="blackbox-icmp-general"} == 0
    for: 3m
    labels:
      severity: critical
    annotations:
      description: "Host {{ $labels.instance }} is not available via icmp-protocol for more than 3 minutes."
      summary: "Host {{ $labels.instance }} is down"
 
  - alert: host_response_time_is_high_via_icmp
    expr: sum by (instance) (probe_icmp_duration_seconds) > 1
    for: 1m
    labels:
      severity: warning
    annotations:
      description: "Host {{ $labels.instance }} response time via icmp-protocol is very high(>1s) for more than 1 minutes."
      summary: "Host {{ $labels.instance }} response time is {{ humanize $value}}s"
